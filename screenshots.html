<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <title>AutomateIt: Screenshots</title>
    <link href='http://yui.yahooapis.com/2.4.1/build/reset-fonts-grids/reset-fonts-grids.css' media='all' rel='stylesheet' type='text/css' />
    <link href='stylesheets/application.css' media='all' rel='stylesheet' type='text/css' />
    <!-- /= stylesheets -->
  </head>
  <body>
    <div id='everything'>
      <div id='header'>
        <table>
          <tr>
            <td>
              <div class='logo'>
                <a href='index.html'>
                  <img alt='AutomateIt - Open source server automation' src='images/logo.png' />
                </a>
              </div>
            </td>
            <td align='middle'>
              <!-- / .tagline -->
              <!-- /  System Administration 2.0 -->
            </td>
          </tr>
        </table>
      </div>
      <div id='menu_and_page_content'>
        <table>
          <tr>
            <td>
              <div id='menu'>
                <ul>
                  <!-- / %li Learn -->
                  <li><a href="index">Home</a></li>
                  <li><a href="about">About</a></li>
                  <li><a href="compare">Compare</a></li>
                  <li>&nbsp;</li>
                  <!-- / %li Use -->
                  <li><a href="screenshots">Screenshots</a></li>
                  <li><a href="tutorial">Tutorial</a></li>
                  <li><a href="documentation">Documentation</a></li>
                  <li><a href="compatibility">Compatibility</a></li>
                  <li><a href="download">Download</a></li>
                  <li>&nbsp;</li>
                  <!-- / %li Connect -->
                  <li><a href="http://groups.google.com/group/automateit">Community</a></li>
                  <li><a href="contact">Contact</a></li>
                  <li><a href="credits">Credits</a></li>
                  <li><a href="changes">Changes</a></li>
                </ul>
              </div>
            </td>
            <td>
              <div id='page_content'>
                <div id='screenshots_section'>
                  <h1>AutomateIt screenshots</h1>
                  <p><strong>AutomateIt is an open source tool for automating the setup and maintenance of servers, applications and their dependencies.</strong></p>
                  <p>The screenshots below will show how to use AutomateIt to setup a Ruby on Rails application server on Linux. AutomateIt can also be used to fully automate entire systems and works well with a variety of OSes, frameworks and tools.</p>
                  <p>The code in these screens is self-documenting and the accompanying text is deliberately brief. Please read the <a href="tutorial">Tutorial</a> for further information.</p>
                  <p>You will need to <a href="download">install</a> AutomateIt to run these examples.</p>
                  <h2>Let&#8217;s see some code!</h2>
                  <h3>Project</h3>
                  <p>Create a project, this will make a <code>demo</code> directory for your configuration files and recipes:</p>
                  <pre><font color="#90ee90">root@kagami&gt; automateit --create demo</font>&#x000A;</pre>&#x000A;
                  <p>Change into this new directory with <code>cd demo</code>.</p>
                  <h3>Tags</h3>
                  <p>Describe hosts and their roles in the project&#8217;s <code>config/tags.yml</code> file. The example in these screenshots is run on host a called <code>kagami</code>. This host is tagged with the <code>rails_servers</code> and <code>myapp_servers</code> roles. To make this recipe run on your system, replace <code>kagami</code> with your hostname. Tags will be checked in the recipe using <code>tagged?</code><br />
                  methods:</p>
                  <pre><font color="#8db6cd">rails_servers</font><font color="#66cdaa"><b>:</b></font>&#x000A;    <span style="background-color: #103040"><font color="#7fff00">-</font></span> kagami&#x000A;    <span style="background-color: #103040"><font color="#7fff00">-</font></span> tsukasa&#x000A;<font color="#8db6cd">myapp_servers</font><font color="#66cdaa"><b>:</b></font>&#x000A;    <span style="background-color: #103040"><font color="#7fff00">-</font></span> kagami&#x000A;</pre>&#x000A;
                  <h3>Fields</h3>
                  <p>Define configuration constants in the project&#8217;s <code>config/fields.yml</code> file, these will be retrieved in the recipe using <code>lookup</code> methods:</p>
                  <pre><font color="#8db6cd">user</font><font color="#66cdaa"><b>:</b></font> myapp_user&#x000A;<font color="#8db6cd">port</font><font color="#66cdaa"><b>:</b></font> <span style="background-color: #103040"><font color="#00ffff">9826</font></span>&#x000A;<font color="#8db6cd">path</font><font color="#66cdaa"><b>:</b></font> /tmp/myapp_server&#x000A;</pre>&#x000A;
                  <h3>Installer recipe</h3>
                  <p>Write a recipe to set up a Rails application server, saving it as <code>recipes/install.rb</code>:</p>
                  <pre><font color="#9a94c8"># Install dependencies on hosts with 'rails_servers' or 'myapp_servers' roles</font>&#x000A;<font color="#90ee90">if</font> tagged?(<font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">rails_servers | myapp_servers</font></span><font color="#66cdaa"><b>&quot;</b></font>)&#x000A;  <font color="#9a94c8"># Install platform-specific packages</font>&#x000A;  <font color="#90ee90">if</font> tagged?(<font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">ubuntu | debian</font></span><font color="#66cdaa"><b>&quot;</b></font>)&#x000A;    <font color="#9a94c8"># Install the 'build-essential' package and others on Ubuntu or Debian</font>&#x000A;    package_manager.install(<font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">build-essential</font></span><font color="#66cdaa"><b>&quot;</b></font>, <font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">ruby1.8-dev</font></span><font color="#66cdaa"><b>&quot;</b></font>, <font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">libsqlite3-dev</font></span><font color="#66cdaa"><b>&quot;</b></font>)&#x000A;  <font color="#90ee90">elsif</font> tagged?(<font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">fedoracore | fedora | centos</font></span><font color="#66cdaa"><b>&quot;</b></font>)&#x000A;    <font color="#9a94c8"># Install equivalent packages on Fedora and similar OSes</font>&#x000A;    package_manager.install(<font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">gcc</font></span><font color="#66cdaa"><b>&quot;</b></font>, <font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">ruby-devel</font></span><font color="#66cdaa"><b>&quot;</b></font>, <font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">sqlite-devel</font></span><font color="#66cdaa"><b>&quot;</b></font>)&#x000A;  <font color="#90ee90">else</font>&#x000A;    <font color="#9a94c8"># Fail if running on another platform</font>&#x000A;    <span style="background-color: #103040"><font color="#90ee90"><b>raise</b></font></span> <font color="#8db6cd">NotImplementedError</font>.new(<font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">no packages specified for this platform</font></span><font color="#66cdaa"><b>&quot;</b></font>)&#x000A;  <font color="#90ee90">end</font>&#x000A;&#x000A;  <font color="#9a94c8"># Install Rails and supporting libraries with RubyGems</font>&#x000A;  package_manager.install(<font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">rails</font></span><font color="#66cdaa"><b>&quot;</b></font>, <font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">sqlite3-ruby</font></span><font color="#66cdaa"><b>&quot;</b></font>, <font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">mongrel</font></span><font color="#66cdaa"><b>&quot;</b></font>,&#x000A;    <font color="#8db6cd">:with</font> =&gt; <font color="#8db6cd">:gem</font>, <font color="#8db6cd">:docs</font> =&gt; <span style="background-color: #103040"><font color="#00cdcd">false</font></span>)&#x000A;<font color="#90ee90">end</font> <font color="#9a94c8"># ENDS: if tagged?(&quot;rails_servers | myapp_servers&quot;)</font>&#x000A;&#x000A;<font color="#9a94c8"># Setup the myapp server, a simple Rails server instance</font>&#x000A;<font color="#90ee90">if</font> tagged?(<font color="#8db6cd">:myapp_servers</font>)&#x000A;  <font color="#9a94c8"># Create user for the application</font>&#x000A;  account_manager.add_user(lookup(<font color="#8db6cd">:user</font>))&#x000A;&#x000A;  <font color="#9a94c8"># Create a directory for the application and 'cd' into it</font>&#x000A;  mkdir_p(lookup(<font color="#8db6cd">:path</font>)) <font color="#90ee90">do</font>&#x000A;    <font color="#9a94c8"># Run shell commands to create the app and database</font>&#x000A;    <font color="#90ee90">unless</font> <font color="#8db6cd">File</font>.exists?(<font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">config/routes.rb</font></span><font color="#66cdaa"><b>&quot;</b></font>)&#x000A;      sh(<font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">rails --database=sqlite3 . &gt; /dev/null</font></span><font color="#66cdaa"><b>&quot;</b></font>)&#x000A;    <font color="#90ee90">end</font>&#x000A;&#x000A;    <font color="#9a94c8"># Create the database if it doesn't exist.</font>&#x000A;    <font color="#90ee90">if</font> <font color="#8db6cd">Dir</font>[<font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">db/*.sqlite3</font></span><font color="#66cdaa"><b>&quot;</b></font>].empty?&#x000A;      sh(<font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">rake db:migrate</font></span><font color="#66cdaa"><b>&quot;</b></font>)&#x000A;    <font color="#90ee90">end</font>&#x000A;&#x000A;    <font color="#9a94c8"># Edit the homepage</font>&#x000A;    edit(<font color="#8db6cd">:file</font> =&gt; <font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">public/index.html</font></span><font color="#66cdaa"><b>&quot;</b></font>) <font color="#90ee90">do</font>&#x000A;      append(<font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">&lt;!-- Edited by AutomateIt --&gt;</font></span><font color="#66cdaa"><b>&quot;</b></font>)&#x000A;      replace(<font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">Welcome aboard</font></span><font color="#66cdaa"><b>&quot;</b></font>, <font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">This is MyAppServer</font></span><font color="#66cdaa"><b>&quot;</b></font>)&#x000A;    <font color="#90ee90">end</font>&#x000A;&#x000A;    <font color="#9a94c8"># Set the ownership of the created files</font>&#x000A;    chperm(<font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">.</font></span><font color="#66cdaa"><b>&quot;</b></font>, <font color="#8db6cd">:user</font> =&gt; lookup(<font color="#8db6cd">:user</font>), <font color="#8db6cd">:recurse</font> =&gt; <span style="background-color: #103040"><font color="#00cdcd">true</font></span>)&#x000A;&#x000A;    <font color="#9a94c8"># Generate a service startup file using a template</font>&#x000A;    render(&#x000A;      <font color="#8db6cd">:file</font> =&gt; dist+<font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">myapp_server.erb</font></span><font color="#66cdaa"><b>&quot;</b></font>,&#x000A;      <font color="#8db6cd">:to</font> =&gt; <font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">/etc/init.d/myapp_server</font></span><font color="#66cdaa"><b>&quot;</b></font>,&#x000A;      <font color="#8db6cd">:mode</font> =&gt; <span style="background-color: #103040"><font color="#00ffff">0555</font></span>,&#x000A;      <font color="#8db6cd">:locals</font> =&gt; {&#x000A;        <font color="#8db6cd">:path</font> =&gt; lookup(<font color="#8db6cd">:path</font>),&#x000A;        <font color="#8db6cd">:user</font> =&gt; lookup(<font color="#8db6cd">:user</font>),&#x000A;        <font color="#8db6cd">:port</font> =&gt; lookup(<font color="#8db6cd">:port</font>),&#x000A;      }&#x000A;    )&#x000A;&#x000A;    <font color="#9a94c8"># Start the server</font>&#x000A;    service_manager.start(<font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">myapp_server</font></span><font color="#66cdaa"><b>&quot;</b></font>)&#x000A;  <font color="#90ee90">end</font> <font color="#9a94c8"># ENDS: mkdir_p(lookup(:path)) do</font>&#x000A;<font color="#90ee90">end</font> <font color="#9a94c8"># ENDS: if tagged?(:myapp_servers)</font>&#x000A;</pre>&#x000A;
                  <h3>Template</h3>
                  <p>Create a template file to render, <code>dist/myapp_server.erb</code>. This is <strong>not</strong> AutomateIt code &#8212; the only thing worth paying attention to is that the <span class="caps">ERB</span> template fields will be replaced by the <code>render</code> call in the recipe. For example, the <code>port = "&lt;%=port%&gt;"</code> line will be rendered as <code>port = "9826"</code>.</p>
                  <pre><font color="#87ceff">#!/usr/bin/env ruby</font>&#x000A;&#x000A;user = <font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">&lt;%=user%&gt;</font></span><font color="#66cdaa"><b>&quot;</b></font>&#x000A;port = <font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">&lt;%=port%&gt;</font></span><font color="#66cdaa"><b>&quot;</b></font>&#x000A;path = <font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">&lt;%=path%&gt;</font></span><font color="#66cdaa"><b>&quot;</b></font>&#x000A;pid = <font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">mongrel.pid</font></span><font color="#66cdaa"><b>&quot;</b></font>&#x000A;&#x000A;<font color="#8db6cd">ENV</font>[<font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">PATH</font></span><font color="#66cdaa"><b>&quot;</b></font>] = <font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">%s/bin:%s</font></span><font color="#66cdaa"><b>&quot;</b></font> % [<font color="#66cdaa"><b>`</b></font><span style="background-color: #103040"><font color="#00e5ee">gem env gemdir</font></span><font color="#66cdaa"><b>`</b></font>.strip, <font color="#8db6cd">ENV</font>[<font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">PATH</font></span><font color="#66cdaa"><b>&quot;</b></font>]]&#x000A;&#x000A;<font color="#90ee90">case</font> <font color="#8db6cd">ARGV</font>.first&#x000A;<font color="#90ee90">when</font> <font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">start</font></span><font color="#66cdaa"><b>&quot;</b></font>&#x000A;  <font color="#8db6cd">Dir</font>.chdir(path)&#x000A;  puts <font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">Starting MyAppServer at http://localhost:</font></span><font color="#66cdaa"><b>#{port}</b></font><span style="background-color: #103040"><font color="#00e5ee">/</font></span><font color="#66cdaa"><b>&quot;</b></font>&#x000A;  <font color="#90ee90">exit</font> system(<font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">PATH=</font></span><font color="#66cdaa"><b>#{ENV[&quot;PATH&quot;]}</b></font><span style="background-color: #103040"><font color="#00e5ee"> mongrel_rails start </font></span><font color="#66cdaa"><b>&quot;</b></font> \&#x000A;    <font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">--user </font></span><font color="#66cdaa"><b>#{user}</b></font><span style="background-color: #103040"><font color="#00e5ee"> --group </font></span><font color="#66cdaa"><b>#{user}</b></font><span style="background-color: #103040"><font color="#00e5ee"> --pid </font></span><font color="#66cdaa"><b>#{pid}</b></font><span style="background-color: #103040"><font color="#00e5ee"> --daemonize </font></span><font color="#66cdaa"><b>&quot;</b></font> \&#x000A;    <font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">--port </font></span><font color="#66cdaa"><b>#{port}</b></font><span style="background-color: #103040"><font color="#00e5ee"> 2&gt;&amp;1 | grep -v cgi_multipart_eof_fix</font></span><font color="#66cdaa"><b>&quot;</b></font>) ? <span style="background-color: #103040"><font color="#00ffff">0</font></span> : <span style="background-color: #103040"><font color="#00ffff">1</font></span>&#x000A;<font color="#90ee90">when</font> <font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">stop</font></span><font color="#66cdaa"><b>&quot;</b></font>&#x000A;  <font color="#8db6cd">Dir</font>.chdir(path)&#x000A;  <font color="#90ee90">exit</font> system(<font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">PATH=</font></span><font color="#66cdaa"><b>#{ENV[&quot;PATH&quot;]}</b></font><span style="background-color: #103040"><font color="#00e5ee"> mongrel_rails stop </font></span><font color="#66cdaa"><b>&quot;</b></font> \&#x000A;    <font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">--pid </font></span><font color="#66cdaa"><b>#{pid}</b></font><span style="background-color: #103040"><font color="#00e5ee"> 2&gt;&amp;1 | grep -v cgi_multipart_eof_fix</font></span><font color="#66cdaa"><b>&quot;</b></font>) ? <span style="background-color: #103040"><font color="#00ffff">0</font></span> : <span style="background-color: #103040"><font color="#00ffff">1</font></span>&#x000A;<font color="#90ee90">when</font> <font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">status</font></span><font color="#66cdaa"><b>&quot;</b></font>&#x000A;  <font color="#90ee90">begin</font>&#x000A;    <font color="#8db6cd">Process</font>.kill(<span style="background-color: #103040"><font color="#00ffff">0</font></span>, <font color="#8db6cd">File</font>.read(<font color="#8db6cd">File</font>.join(path, pid)).to_i)&#x000A;    <font color="#90ee90">exit</font> <span style="background-color: #103040"><font color="#00ffff">0</font></span>&#x000A;  <font color="#90ee90">rescue</font> <font color="#8db6cd">Errno</font>::<font color="#8db6cd">ENOENT</font>, <font color="#8db6cd">Errno</font>::<font color="#8db6cd">ESRCH</font>&#x000A;    <font color="#90ee90">exit</font> -<span style="background-color: #103040"><font color="#00ffff">1</font></span> <font color="#9a94c8"># File or pid not found</font>&#x000A;  <font color="#90ee90">end</font>&#x000A;<font color="#90ee90">else</font>&#x000A;  puts <font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">ERROR: expected argument -- start, stop or status</font></span><font color="#66cdaa"><b>&quot;</b></font>&#x000A;<font color="#90ee90">end</font>&#x000A;</pre>&#x000A;
                  <h3>Preview and execution</h3>
                  <p>Preview the commands this recipe will execute, without actually executing them, by specifying the <code>--preview</code> flag:</p>
                  <pre><font color="#90ee90">root@kagami&gt; automateit --preview recipes/install.rb</font>&#x000A;** apt-get install -y -q ruby1.8-dev libsqlite3-dev &lt; /dev/null 2&gt;&amp;1&#x000A;** gem install -y --no-ri --no-rdoc rails sqlite3-ruby mongrel 2&gt;&amp;1&#x000A;** useradd --create-home --shell /bin/bash myapp_user &gt; /dev/null&#x000A;** nscd --invalidate passwd&#x000A;** mkdir -p /tmp/myapp_server&#x000A;** pushd /tmp/myapp_server&#x000A;** rails --database=sqlite3 . &gt; /dev/null&#x000A;** rake db:migrate&#x000A;=&gt; Edited 'public/index.html'&#x000A;** chown -R myapp_user .&#x000A;=&gt; Rendering '/etc/init.d/myapp_server' because of it doesn't exist&#x000A;** chmod 0555 /etc/init.d/myapp_server&#x000A;** /etc/init.d/myapp_server start&#x000A;** popd&#x000A;<font color="#90ee90">root@kagami&gt;</font>&#x000A;</pre>&#x000A;
                  <p>Run the recipe without the <code>--preview</code> to apply it. Commands like <code>apt-get</code> will now display output because they&#8217;re being executed. The <code>gem</code> command typically requires manual intervention, but AutomateIt can guess which versions of Gems to install. When finished, the newly-created Rails server will be started:</p>
                  <pre><font color="#90ee90">root@kagami&gt; automateit recipes/install.rb</font>&#x000A;** apt-get install -y -q ruby1.8-dev libsqlite3-dev &lt; /dev/null 2&gt;&amp;1&#x000A;Reading package lists...&#x000A;Building dependency tree...&#x000A;Reading state information...&#x000A;The following extra packages will be installed:&#x000A;[...]&#x000A;** gem install -y --no-ri --no-rdoc rails sqlite3-ruby mongrel 2&gt;&amp;1&#x000A;Select which gem to install for your platform (i486-linux)&#x000A;1. mongrel 1.0.1 (mswin32)&#x000A;2. mongrel 1.0.1 (ruby)&#x000A;3. mongrel 1.0 (mswin32)&#x000A;4. mongrel 1.0 (ruby)&#x000A;5. Skip this gem&#x000A;6. Cancel installation&#x000A;&gt;=&gt; Guessing: 2&#x000A;[...]&#x000A;** useradd --create-home --shell /bin/bash myapp_user &gt; /dev/null&#x000A;** nscd --invalidate passwd&#x000A;** mkdir -p /tmp/myapp_server&#x000A;** pushd /tmp/myapp_server&#x000A;** rails --database=sqlite3 . &gt; /dev/null&#x000A;** rake db:migrate&#x000A;[...]&#x000A;=&gt; Edited 'public/index.html'&#x000A;** chown -R myapp_user .&#x000A;=&gt; Rendering '/etc/init.d/myapp_server' because of it doesn't exist&#x000A;** chmod 0555 /etc/init.d/myapp_server&#x000A;** /etc/init.d/myapp_server start&#x000A;Starting MyAppServer at http://localhost:9826/&#x000A;** popd&#x000A;<font color="#90ee90">root@kagami&gt;</font>&#x000A;</pre>&#x000A;
                  <p>Run the recipe again &#8212; it will detect that everything is as it should be and won&#8217;t do anything:</p>
                  <pre><font color="#90ee90">root@kagami&gt; automateit recipes/install.rb</font>&#x000A;<font color="#90ee90">root@kagami&gt;</font>&#x000A;</pre>&#x000A;
                  <p>Now stop the Rails server manually and re-run the recipe &#8212; it will figure out that the server isn&#8217;t running and start it:</p>
                  <pre><font color="#90ee90">root@kagami&gt; /etc/init.d/myapp_server stop</font>&#x000A;Sending TERM to Mongrel at PID 32419...Done.&#x000A;<font color="#90ee90">root@kagami&gt; automateit recipes/install.rb</font>&#x000A;** pushd /tmp/myapp_server&#x000A;** /etc/init.d/myapp_server start&#x000A;Starting MyAppServer at http://localhost:9826/&#x000A;** popd&#x000A;<font color="#90ee90">root@kagami&gt;</font>&#x000A;</pre>&#x000A;
                  <h3>Uninstaller recipe</h3>
                  <p>You can uninstall the Rails server with this recipe, save it as <code>recipes/uninstall.rb</code>:</p>
                  <pre><font color="#90ee90">if</font> tagged? <font color="#8db6cd">:myapp_servers</font>&#x000A;  service_manager.stop <font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">myapp_server</font></span><font color="#66cdaa"><b>&quot;</b></font>&#x000A;  rm <font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">/etc/init.d/myapp_server</font></span><font color="#66cdaa"><b>&quot;</b></font>&#x000A;  rm_rf lookup(<font color="#8db6cd">:path</font>)&#x000A;  account_manager.remove_user lookup(<font color="#8db6cd">:user</font>)&#x000A;<font color="#90ee90">end</font>&#x000A;</pre>&#x000A;
                  <p>Run the uninstaller:</p>
                  <pre><font color="#90ee90">root@kagami&gt; automateit recipes/uninstall.rb</font>&#x000A;** "/etc/init.d/myapp_server" "stop"&#x000A;Sending TERM to Mongrel at PID 29149...Done.&#x000A;** rm /etc/init.d/myapp_server&#x000A;** rm_rf /tmp/myapp_server&#x000A;** userdel -r myapp_user&#x000A;** nscd --invalidate passwd&#x000A;<font color="#90ee90">root@kagami&gt;</font>&#x000A;</pre>&#x000A;
                  <p>Re-run the uninstaller &#8212; it&#8217;ll detect that the files are gone and the server is stopped, and so it won&#8217;t do anything:</p>
                  <pre><font color="#90ee90">root@kagami&gt; automateit recipes/uninstall.rb</font>&#x000A;<font color="#90ee90">root@kagami&gt;</font>&#x000A;</pre>&#x000A;
                  <h3>Embedding</h3>
                  <p>AutomateIt can be easily embedded into other programs. For example, put the following <code>Rakefile</code> into the <code>demo</code> project directory. You will now be able to execute Rake tasks like <code>rake preview install</code>, which will run the equivalent of <code>automateit --preview recipes/install.rb</code>.</p>
                  <pre><span style="background-color: #103040"><font color="#a2b5cd">require</font></span> <font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">automateit</font></span><font color="#66cdaa"><b>&quot;</b></font>&#x000A;&#x000A;<font color="#9a94c8"># Create an Interpreter for project in current directory.</font>&#x000A;<font color="#8db6cd">@interpreter</font> = <font color="#8db6cd">AutomateIt</font>.new(<font color="#8db6cd">:project</font> =&gt; <font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">.</font></span><font color="#66cdaa"><b>&quot;</b></font>)&#x000A;&#x000A;<font color="#9a94c8"># Include Interpreter's 'invoke' and 'preview' methods into Rake.</font>&#x000A;<font color="#8db6cd">@interpreter</font>.include_in(<span style="background-color: #103040"><font color="#00cdcd">self</font></span>, <font color="#66cdaa"><b>%w(</b></font><span style="background-color: #103040"><font color="#00e5ee">invoke preview</font></span><font color="#66cdaa"><b>)</b></font>)&#x000A;&#x000A;desc <font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">Install myapp server</font></span><font color="#66cdaa"><b>&quot;</b></font>&#x000A;task <font color="#8db6cd">:install</font> <font color="#90ee90">do</font>&#x000A;  <font color="#9a94c8"># The 'invoke' method was created by the 'include_in' call earlier,</font>&#x000A;  <font color="#9a94c8"># as a convenient shortcut for: @interpreter.invoke(&quot;install&quot;)</font>&#x000A;  invoke <font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">install</font></span><font color="#66cdaa"><b>&quot;</b></font>&#x000A;<font color="#90ee90">end</font>&#x000A;&#x000A;desc <font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">Uninstall myapp server</font></span><font color="#66cdaa"><b>&quot;</b></font>&#x000A;task <font color="#8db6cd">:uninstall</font> <font color="#90ee90">do</font>&#x000A;  invoke <font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">uninstall</font></span><font color="#66cdaa"><b>&quot;</b></font>&#x000A;<font color="#90ee90">end</font>&#x000A;&#x000A;desc <font color="#66cdaa"><b>&quot;</b></font><span style="background-color: #103040"><font color="#00e5ee">Preview action, e.g, 'rake preview install'</font></span><font color="#66cdaa"><b>&quot;</b></font>&#x000A;task <font color="#8db6cd">:preview</font> <font color="#90ee90">do</font>&#x000A;  preview <span style="background-color: #103040"><font color="#00cdcd">true</font></span>&#x000A;<font color="#90ee90">end</font>&#x000A;</pre>&#x000A;&#x000A;
                  <h2>Learn more</h2>
                  <p>AutomateIt can do much more than this simple example shows. For more information, see the hands-on <a href="tutorial">Tutorial</a> and reference <a href="documentation">Documentation</a>.</p>
                </div>
              </div>
            </td>
          </tr>
        </table>
      </div>
      <div id='footer'>
        <p>
          Copyright &copy; 2007-2009 Igal Koshevoy. <a href="legal">Legal</a>.
        </p>
      </div>
    </div>
    <script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
    </script>
    <script type="text/javascript">
    _uacct = "UA-2647440-1";
    urchinTracker();
    </script>
  </body>
</html>
